"use strict";var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var V=_(o=>{"use strict";var G=o&&o.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),U=o&&o.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),z=o&&o.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&G(t,e,n);return U(t,e),t};Object.defineProperty(o,"__esModule",{value:!0});o.parseKeyValueLinesIntoConfiguration=o.castValue=o.interpolateValue=o.parseKeyValueFileIntoConfiguration=void 0;var H=z(require("fs"));function Q(e){let t=H.readFileSync(e,"utf-8");return F(t)}o.parseKeyValueFileIntoConfiguration=Q;var X=(e,t)=>e.replace(/\${(.*?)}/g,(n,r)=>t[r]?String(t[r]):process.env[r]?process.env[r]:"");o.interpolateValue=X;var Y=e=>{if(e.startsWith("0x"))return e;let t=Number(e);return isNaN(t)?e:t};o.castValue=Y;function F(e){let t=e.split(`
`),n={};for(let r of t){let i=r.trim();if(!i||i.startsWith("#"))continue;let[c,...l]=r.split("="),f=l.join("=").trim();if(!c||!f)continue;let s=c.trim();if(!(!s||!f)){if(Object.keys(n).includes(s))throw new Error(`[ERROR]: Duplicated key \`${s}\` found`);f!=null&&(n[s]=(0,o.castValue)(f))}}return n}o.parseKeyValueLinesIntoConfiguration=F});var T=_(d=>{"use strict";var Z=d&&d.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},B=d&&d.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},b;Object.defineProperty(d,"__esModule",{value:!0});d.EncryptionService=void 0;var D=require("crypto"),C="aes-256-cbc";function k(e){return{ivString:e.slice(0,32),encryptedDataString:e.slice(32)}}var x=class{constructor(e){b.set(this,void 0),this.encoding="hex",Z(this,b,e,"f")}encryptString(e){try{let t=(0,D.randomBytes)(16),n=(0,D.createCipheriv)(C,B(this,b,"f").exposeSecret(),t),r=Buffer.concat([n.update(e,"utf-8"),n.final()]);return t.toString(this.encoding)+r.toString(this.encoding)}catch(t){throw new Error(`\`Encryption failed because of \`${t}\``)}}decryptString(e){let{encryptedDataString:t,ivString:n}=k(e);try{let r=Buffer.from(n,this.encoding),i=Buffer.from(t,this.encoding),c=(0,D.createDecipheriv)(C,B(this,b,"f").exposeSecret(),r),l=c.update(i);return Buffer.concat([l,c.final()]).toString()}catch(r){throw new Error(`\`Decryption failed because of \`${r}\``)}}};d.EncryptionService=x;b=new WeakMap});var q=_(a=>{"use strict";var ee=a&&a.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),te=a&&a.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ne=a&&a.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&ee(t,e,n);return te(t,e),t},P=a&&a.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},h=a&&a.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},p,y,w;Object.defineProperty(a,"__esModule",{value:!0});a.isFunction=a.Secret=void 0;var W=ne(require("fs"));function R(e){return typeof e=="function"}a.isFunction=R;var m=class e{constructor(t,n,r,...i){if(p.set(this,void 0),y.set(this,void 0),w.set(this,0),t===void 0&&n===void 0)throw new Error("Either `secret` or `func` must be specified");if(t!==void 0&&n!==void 0)throw new Error("Only `secret` or `func` should be specified, not both");if(n&&R(n)){let c=n(...i);if(c==null)throw new Error("Function to generate the secret returned undefined");P(this,p,c,"f")}else P(this,p,t,"f");if(r!==void 0){if(r<=0)throw new Error("`max_expose_count` when specified must be a positive integer");P(this,y,r,"f")}}toString(){return`Secret<${typeof h(this,p,"f")}>`}exposeSecret(){var t;if(!(h(this,y,"f")!==void 0&&h(this,w,"f")>=h(this,y,"f")))return P(this,w,(t=h(this,w,"f"),t++,t),"f"),h(this,p,"f")}get max_expose_count(){return h(this,y,"f")}get expose_count(){return h(this,w,"f")}static fromFile(t,n,r=void 0){console.log("Loading `targetKey` = ",n," from `filePath`",t);let c=W.readFileSync(t,"utf-8").split(`
`);for(let l of c){let[f,...s]=l.split("="),j=s.join("=").trim();if(!(!f||!j)&&f.trim()===n)return new e(j,void 0,r)}throw new Error(`\`${n}\` cannot be found!`)}static parseKeyValueFileIntoObjectOfKeySecret(t,n=void 0){let i=W.readFileSync(t,"utf-8").split(`
`),c={};for(let l of i){let f=l.trim();if(!f||f.startsWith("#"))continue;let[s,...j]=l.split("="),M=j.join("=").trim();if(!s||!M)continue;if(Object.keys(c).includes(s))throw new Error(`[ERROR]: Duplicated key \`${s}\` found`);let A=new e(M,void 0,function(){return n===void 0||typeof n=="number"?n:n[s]}());M!==void 0&&(c[s.trim()]=A)}return c}};a.Secret=m;p=new WeakMap,y=new WeakMap,w=new WeakMap});var $=_(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.handleNullOrUndefinedWithErrorMessage=void 0;function re(e,t){if(e==null){let n=t||`Value is ${e}`;throw new Error(n)}return e}O.handleNullOrUndefinedWithErrorMessage=re});var K=_(u=>{"use strict";var ie=u&&u.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),oe=u&&u.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),J=u&&u.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&ie(t,e,n);return oe(t,e),t};Object.defineProperty(u,"__esModule",{value:!0});u.joinRelativePaths=u.joinRelativeToPackageJson=u.findFileDir=u.findPackageJsonDir=void 0;var g=J(require("path")),S=J(require("fs"));function I(e=process.cwd()){let t=e;for(;t!=="/";){let n=g.join(t,"package.json");if(S.existsSync(n))return t;t=g.dirname(t)}}u.findPackageJsonDir=I;function ae(e=process.cwd(),t){let n=e;for(;n!=="/";){let r=g.join(n,t);if(S.existsSync(r))return n;n=g.dirname(n)}}u.findFileDir=ae;function ue(...e){let t=I();if(t)return g.join(t,...e);throw new Error("Unable to locate the directory of `package.json`")}u.joinRelativeToPackageJson=ue;function ce(e,...t){if(!S.existsSync(e))throw new Error(`Directory "${e}" does not exist`);let n=g.join(e,...t);if(!S.existsSync(n))throw new Error(`Path "${n}" does not exist`);return n}u.joinRelativePaths=ce});var N=_(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.printAnyObjectWithStandardFormat=void 0;function L(e){return e&&typeof e=="object"&&typeof e[Symbol.iterator]=="function"?`[${Array.from(e,n=>L(n)).join(", ")}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString():n,2)}E.printAnyObjectWithStandardFormat=L});var se=exports&&exports.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),fe=exports&&exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=exports&&exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&se(t,e,n);return fe(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0});exports.printing=exports.path=exports.handleNull=exports.secret=exports.encrypt=exports.configuration=void 0;exports.configuration=v(V());exports.encrypt=v(T());exports.secret=v(q());exports.handleNull=v($());exports.path=v(K());exports.printing=v(N());
